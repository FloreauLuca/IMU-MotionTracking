<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <script>

        var chart = null;
        var data = [];

        window.onload = function() {

            chart = new CanvasJS.Chart("chartContainer",
                {         
                    animationEnabled: true,
                    zoomEnabled: true,
                    title:{
                        text: "Performance Demo with 50,000 Data Points"
                    }, 
                    subtitles:[{
                        text: "Try Zooming and Panning"
                    }],
                    data: data,
                    axisY:{
                        includeZero: false
                    }
                });
                                                           
            //$.getJSON("../Assets/Graph/new-json-graph-test.graph", callback);           
        };                       
        function drawGraph() {     
            var x = document.getElementById("data").value;
            console.log(x);                                                
            var json = JSON.parse(x);
            //console.log(data);
            Object.keys(json).forEach(key => {
                console.log(key, json[key]);
            });
            writeToDataPoint(json);
        }
        function writeToDataPoint(json) {
            Object.keys(json.frames[0]).forEach(key => { 
                var dataPoints = [];  
                for (var i = 0; i < json.frames.length; i++) { 
                    if (json.frames[i][key].x != undefined) {
                        dataPoints.push({
                            x: json.frames[i].dt,
                            y: json.frames[i][key].x
                        });
                    }
                }
                data.push({
                    type: "line",
                    name: key,
                    showInLegend: true,
                    dataPoints: dataPoints
                });
            });      
            //console.log(dataPoints);       
            chart.render();
        }
    </script>
</head>
<body>
    <div id="chartContainer" style="height: 370px; max-width: 920px; margin: 0px auto;"></div>
    <button type="button" onclick="drawGraph()">Try it</button>
    <br />
    <textarea id="data" rows="30" cols="100"> </textarea>
    <br />
    <button type="button" onclick="drawGraph()">Try it</button>
    <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
    <script src="canvasjs.min.js"></script>
</body>
</html>